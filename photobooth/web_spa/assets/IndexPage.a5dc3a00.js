import{h as t,C as _,V as w,W as k,d as b,_ as C,X as v,Y as S,q as o,t as d,Z as r,j as s,A as a,$ as M,a0 as m,a1 as E,v as $,x as I,a2 as p,y as P,z as u,a3 as B,B as n,a4 as c,a5 as g,a6 as L}from"./index.9cd9a530.js";import{Q as y}from"./QPageSticky.5ef7a90e.js";import{Q as G}from"./QPage.5f2aaea3.js";import{Q}from"./QCircularProgress.ece2e284.js";import"./format.2a3572e1.js";const V=[t("circle",{cx:"12.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"12.5",cy:"52.5",r:"12.5","fill-opacity":".5"},[t("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"52.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"12.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"52.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"12.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"52.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),t("circle",{cx:"92.5",cy:"92.5",r:"12.5"},[t("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})])];var z=_({name:"QSpinnerGrid",props:w,setup(e){const{cSize:i,classes:l}=k(e);return()=>t("svg",{class:l.value,fill:"currentColor",width:i.value,height:i.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg"},V)}});const D=[t("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[t("circle",{cx:"22",cy:"22",r:"1"},[t("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),t("circle",{cx:"22",cy:"22",r:"1"},[t("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var O=_({name:"QSpinnerPuff",props:w,setup(e){const{cSize:i,classes:l}=k(e);return()=>t("svg",{class:l.value,stroke:"currentColor",width:i.value,height:i.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},D)}});const F=b({name:"CountdownTimer",data(){return{intervalTimerId:null,remainingSeconds:0}},mounted(){this.startTimer()},beforeUnmount(){clearInterval(this.intervalTimerId)},computed:{showBox(){return this.remainingSeconds>0},showCountdown(){return+this.remainingSeconds>=this.messageDuration},showMessage(){return!this.showCountdown}},methods:{abortTimer(){clearInterval(this.intervalTimerId),this.remainingSeconds=0},startTimer(){console.log(`starting timer, duration=${this.duration}`),this.remainingSeconds=this.duration,this.intervalTimerId=setInterval(()=>{this.remainingSeconds-=.05,this.remainingSeconds<=0&&clearInterval(this.intervalTimerId)},50)}},props:{duration:{type:Number,required:!0},messageDuration:{type:Number,default:.5},messageText:{type:String,default:"\u{1F603}"}}}),R={class:"flex flex-center",style:{width:"70vw",height:"70vh"},id:"countdown-timer-container"},q=["innerHTML"];function K(e,i,l,f,T,N){return v((o(),d("div",R,[v(r("div",{style:{position:"absolute","font-size":"150px"},innerHTML:e.messageText,id:"countdown-timer-message"},null,8,q),[[S,e.showMessage]]),v(s(Q,{"show-value":"",style:{width:"100%",height:"100%"},value:e.remainingSeconds,min:0,max:this.duration,reverse:"",size:"70vh",color:"primary",class:"text-secondary"},{default:a(()=>[M(m(parseFloat(e.remainingSeconds.toFixed(0))),1)]),_:1},8,["value","max"]),[[S,e.showCountdown]])],512)),[[S,e.showBox]])}var j=C(F,[["render",K]]);const H=b({components:{CountdownTimer:j},setup(){const e=E(),i=$(),l=I();return{store:e,stateStore:i,uiSettingsStore:l,remoteProcedureCall:p}},methods:{takePicture(){p("/processing/chose/1pic")},takeCollage(){p("/processing/chose/collage")},takeAnimation(){p("/processing/chose/animation")},takeVideo(){p("/processing/chose/video")},stopRecordingVideo(){p("/processing/cmd/stop")}},watch:{},computed:{showProcessing:{get(){const e=this.stateStore.state=="captures_completed",i=this.stateStore.state=="capture";return e||i}},showRecording:{get(){return this.stateStore.state=="record"}},livestreamMirror:{get(){return this.uiSettingsStore.uiSettings.livestream_mirror_effect}},showCountdownCounting:{get(){const e=this.stateStore.state=="counting";return this.stateStore.duration>0&&e}},showPreview:{get(){const i=!this.stateStore.state||this.stateStore.state=="finished",l=this.stateStore.state=="record",f=this.stateStore.state=="counting";return i||f||l}},showFrontpage:{get(){return!this.stateStore.state||this.stateStore.state=="finished"}}}}),x={key:1,class:"full-height full-width column justify-center content-center",style:{position:"absolute"}},X={key:2,class:"full-height full-width column justify-center content-center",style:{position:"absolute"},id:"frontpage-countdown"},U=["innerHTML"],Y={key:0},W={class:"row q-gutter-md"},Z={style:{"white-space":"nowrap"},class:"gt-sm"},J={style:{"white-space":"nowrap"},class:"gt-sm"},ee={style:{"white-space":"nowrap"},class:"gt-sm"},te={style:{"white-space":"nowrap"},class:"gt-sm"},ie={key:0},oe={class:"q-gutter-md"},ne={class:"gt-sm"},se={class:"gt-sm"},ae=r("br",null,null,-1);function re(e,i,l,f,T,N){const A=P("countdown-timer");return o(),u(G,{class:"q-pa-none column full-height"},{default:a(()=>[e.showPreview?(o(),d("div",{key:0,id:"preview-stream",style:{"background-image":"url('/api/aquisition/stream.mjpg')"},class:B(["full-width column justify-center content-center",{mirroreffect:e.livestreamMirror}])},null,2)):n("",!0),e.showProcessing?(o(),d("div",x,[s(z,{size:"20em"})])):n("",!0),e.showCountdownCounting?(o(),d("div",X,[s(A,{ref:"countdowntimer",duration:this.stateStore.duration,messageDuration:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TIME,messageText:e.uiSettingsStore.uiSettings.TAKEPIC_MSG_TEXT},null,8,["duration","messageDuration","messageText"])])):n("",!0),e.showFrontpage?(o(),d("div",{key:3,id:"frontpage_text",innerHTML:e.uiSettingsStore.uiSettings.FRONTPAGE_TEXT},null,8,U)):n("",!0),s(y,{position:"bottom",offset:[0,25]},{default:a(()=>[e.showFrontpage?(o(),d("div",Y,[r("div",W,[e.uiSettingsStore.uiSettings.show_takepic_on_frontpage?(o(),u(c,{key:0,stack:"",color:"primary","no-caps":"",rounded:"",onClick:i[0]||(i[0]=h=>e.takePicture()),class:"action-button col-auto",id:"frontpage-button-take-pic"},{default:a(()=>[s(g,{name:"o_photo_camera"}),r("div",Z,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_PHOTO")),1)]),_:1})):n("",!0),e.uiSettingsStore.uiSettings.show_takecollage_on_frontpage?(o(),u(c,{key:1,stack:"",color:"primary","no-caps":"",rounded:"",onClick:i[1]||(i[1]=h=>e.takeCollage()),class:"action-button col-auto",id:"frontpage-button-take-collage"},{default:a(()=>[s(g,{name:"o_auto_awesome_mosaic"}),r("div",J,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_COLLAGE")),1)]),_:1})):n("",!0),e.uiSettingsStore.uiSettings.show_takeanimation_on_frontpage?(o(),u(c,{key:2,stack:"",color:"primary","no-caps":"",rounded:"",onClick:i[2]||(i[2]=h=>e.takeAnimation()),class:"action-button col-auto",id:"frontpage-button-take-animation"},{default:a(()=>[s(g,{name:"o_gif_box"}),r("div",ee,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_ANIMATION")),1)]),_:1})):n("",!0),e.uiSettingsStore.uiSettings.show_takevideo_on_frontpage?(o(),u(c,{key:3,stack:"",color:"primary","no-caps":"",rounded:"",onClick:i[3]||(i[3]=h=>e.takeVideo()),class:"action-button col-auto",id:"frontpage-button-take-video"},{default:a(()=>[s(g,{name:"o_movie"}),r("div",te,m(e.$t("BTN_LABEL_MAINPAGE_TAKE_VIDEO")),1)]),_:1})):n("",!0)])])):n("",!0)]),_:1}),s(y,{position:"top-left",offset:[25,25]},{default:a(()=>[e.showFrontpage?(o(),d("div",ie,[r("div",oe,[e.uiSettingsStore.uiSettings.show_gallery_on_frontpage?(o(),u(c,{key:0,color:"primary","no-caps":"",rounded:"",to:"/gallery",class:"action-button",id:"frontpage-button-to-gallery",style:L(e.uiSettingsStore.uiSettings.gallery_button_style)},{default:a(()=>[s(g,{left:"",name:"photo_library"}),r("div",ne,m(e.$t("BTN_LABEL_MAINPAGE_TO_GALLERY")),1)]),_:1},8,["style"])):n("",!0),e.uiSettingsStore.uiSettings.show_admin_on_frontpage?(o(),u(c,{key:1,rounded:"",color:"secondary","no-caps":"",to:"/admin",class:"action-button",id:"frontpage-button-to-admin"},{default:a(()=>[s(g,{left:"",name:"admin_panel_settings"}),r("div",se,m(e.$t("BTN_LABEL_MAINPAGE_TO_ADMIN")),1)]),_:1})):n("",!0)])])):n("",!0)]),_:1}),e.showRecording?(o(),u(y,{key:4,position:"top",offset:[0,25],align:"center",id:"frontpage-indicator-recording"},{default:a(()=>[s(O,{color:"red",size:"10em"}),ae,s(c,{flat:"",color:"red",label:"Stop recording",onClick:i[4]||(i[4]=h=>e.stopRecordingVideo())})]),_:1})):n("",!0)]),_:1})}var pe=C(H,[["render",re]]);export{pe as default};
