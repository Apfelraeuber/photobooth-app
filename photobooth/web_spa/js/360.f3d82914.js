"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[360],{42360:(e,l,a)=>{a.r(l),a.d(l,{default:()=>S});var t=a(61758),o=a(58790),i=a(29104);const n={class:"q-pa-md"},s={class:"text-h6"},d={class:"text-h6"},r=["onClick"];function c(e,l,a,c,u,p){const f=(0,t.g2)("q-breadcrumbs-el"),_=(0,t.g2)("q-breadcrumbs"),g=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-input"),m=(0,t.g2)("q-btn"),F=(0,t.g2)("q-card-actions"),k=(0,t.g2)("q-card"),h=(0,t.g2)("q-dialog"),y=(0,t.g2)("q-uploader"),E=(0,t.g2)("q-icon"),w=(0,t.g2)("q-td"),L=(0,t.g2)("q-table"),v=(0,t.g2)("q-page"),C=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(v,{padding:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.bF)(_,{gutter:"sm",style:{cursor:"pointer"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"home",onClick:l[0]||(l[0]=e=>c.onBreadcrumbClick(-1))},null,8,["label"]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.breadcrumbs,((e,l)=>((0,t.uX)(),(0,t.Wv)(f,{key:l,onClick:e=>c.onBreadcrumbClick(l)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,t.bF)(h,{modelValue:c.dialog_create_new_folder,"onUpdate:modelValue":l[4]||(l[4]=e=>c.dialog_create_new_folder=e)},{default:(0,t.k6)((()=>[(0,t.bF)(k,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",s,(0,o.v_)(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)])),_:1}),(0,t.bF)(g,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{dense:"",modelValue:c.new_folder_name,"onUpdate:modelValue":l[1]||(l[1]=e=>c.new_folder_name=e),autofocus:"",onKeyup:l[2]||(l[2]=(0,i.jR)((e=>{c.createNewFolder(c.new_folder_name),c.dialog_create_new_folder=!1}),["enter"]))},null,8,["modelValue"])])),_:1}),(0,t.bF)(F,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(m,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[C]]),(0,t.bo)((0,t.bF)(m,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:l[3]||(l[3]=e=>c.createNewFolder(c.new_folder_name))},null,8,["label"]),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(h,{modelValue:c.dialog_upload_files,"onUpdate:modelValue":l[7]||(l[7]=e=>c.dialog_upload_files=e)},{default:(0,t.k6)((()=>[(0,t.bF)(k,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",d,(0,o.v_)(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)])),_:1}),(0,t.bF)(g,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"Upload Files",url:"/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:c.folder_current}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:l[5]||(l[5]=e=>c.getFolderContent(c.folder_current)),onUploaded:l[6]||(l[6]=e=>c.dialog_upload_files=!1)},null,8,["form-fields"])])),_:1}),(0,t.bF)(F,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(m,{flat:"",label:"Cancel"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(L,{class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:c.pagination,rows:c.folder_rows,filter:c.filter,columns:c.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:c.folder_loading,selection:"multiple",selected:c.selected,"onUpdate:selected":l[13]||(l[13]=e=>c.selected=e),"virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":(0,t.k6)((e=>[(0,t.bF)(w,{props:e},{default:(0,t.k6)((()=>[e.value?((0,t.uX)(),(0,t.Wv)(E,{key:0,name:"folder"})):((0,t.uX)(),(0,t.Wv)(E,{key:1,name:"description"}))])),_:2},1032,["props"])])),"body-cell-name":(0,t.k6)((e=>[(0,t.bF)(w,{props:e,style:{cursor:"pointer"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{onClick:l=>c.onNameClick(e.row)},(0,o.v_)(e.value),9,r)])),_:2},1032,["props"])])),"top-left":(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(m,{disable:c.folder_loading,onClick:l[8]||(l[8]=e=>c.dialog_create_new_folder=!0),label:e.$t("BTN_LABEL_FILES_NEW_FOLDER")},null,8,["disable","label"]),(0,t.bF)(m,{class:"q-ml-sm",disable:c.folder_loading,onClick:l[9]||(l[9]=e=>c.dialog_upload_files=!0),label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE")},null,8,["disable","label"]),(0,t.bF)(m,{class:"q-ml-sm",disable:0==c.selected.length,onClick:l[10]||(l[10]=e=>c.getZip(c.selected)),label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP")},null,8,["disable","label"]),(0,t.bF)(m,{class:"q-ml-sm",color:"negative",disable:0==c.selected.length,onClick:l[11]||(l[11]=e=>c.deleteItems(c.selected)),label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED")},null,8,["disable","label"])])])),"top-right":(0,t.k6)((()=>[(0,t.bF)(b,{borderless:"",dense:"",debounce:"300",modelValue:c.filter,"onUpdate:modelValue":l[12]||(l[12]=e=>c.filter=e),placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:(0,t.k6)((()=>[(0,t.bF)(E,{name:"search"})])),_:1},8,["modelValue","placeholder"])])),_:1},8,["pagination","rows","filter","columns","loading","selected"])])])),_:1})}a(67396),a(50923),a(59502);var u=a(38734),p=(a(80660),a(98384)),f=a(43710);function _(e,l=2){if(!+e)return"0 Bytes";const a=1024,t=l<0?0:l,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(a));return`${parseFloat((e/Math.pow(a,i)).toFixed(t))} ${o[i]}`}const g={watch:{folder_current(e,l){this.getFolderContent(e)}},setup(){const e=(0,f.A)(),l=(0,u.KR)(""),a=(0,u.KR)(!1),o=(0,u.KR)([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:e=>_(e,0)}],n=(0,u.KR)([]),s=(0,u.KR)(""),d=(0,u.KR)(!1),r=(0,u.KR)(""),c=(0,u.KR)(!1),g=(0,u.KR)({rowsPerPage:0}),b=e=>e.split("/").filter((e=>""!==e)).join("/"),m=(0,t.EW)((()=>{if(!l.value)return[];let e=b(l.value).split("/");return e})),F=e=>{e.is_dir?l.value=e.filepath:(0,p.A)(`/admin/files/file/${e.filepath}`)},k=(e=-1)=>{l.value=m.value.slice(0,e+1).join("/")};async function h(l=""){a.value=!0,n.value=[];let t=await fetch(`/admin/files/list/${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await t.json();t.ok?o.value=i:(console.error(i),e.notify({message:`Error ${t.status} getting listing. Please check logs.`,caption:"Files",type:"negative"})),a.value=!1}async function y(l=[]){let a=await fetch("/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(a.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});let l=await a.blob();var t=window.URL.createObjectURL(l);window.location.assign(t)}else{let l=await a.json();console.error(l),e.notify({message:`Error ${a.status} creating zip. Please check logs.`,caption:"Files",type:"negative"})}}async function E(a=[]){let t=await fetch("/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else{let l=await t.json();console.error(l),e.notify({message:`Error ${t.status} deleting items. Please check logs.`,caption:"Files",type:"negative"})}h(l.value)}async function w(a){let t=a;l.value&&(t=l.value+"/"+t),console.log(t);let o=await fetch("/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await o.json();o.ok?(e.notify({message:`Folder "${a}" created.`,caption:"Files",type:"positive"}),h(l.value)):(console.error(i),e.notify({message:`Error ${o.status} while creating folder. Please check logs.`,caption:"Files",type:"negative"}))}return(0,t.sV)((()=>{h()})),{breadcrumbs:m,folder_current:l,folder_columns:i,folder_rows:o,folder_loading:a,pagination:g,selected:n,filter:s,dialog_create_new_folder:d,new_folder_name:r,dialog_upload_files:c,onNameClick:F,onBreadcrumbClick:k,getFolderContent:h,getZip:y,deleteItems:E,createNewFolder:w}}};var b=a(12807),m=a(33177),F=a(35389),k=a(7e3),h=a(57201),y=a(97569),E=a(27066),w=a(78020),L=a(16334),v=a(69001),C=a(86334),A=a(80372),T=a(77109),B=a(24609),I=a(62769),q=a(98582),N=a.n(q);const R=(0,b.A)(g,[["render",c]]),S=R;N()(g,"components",{QPage:m.A,QBreadcrumbs:F.A,QBreadcrumbsEl:k.A,QDialog:h.A,QCard:y.A,QCardSection:E.A,QInput:w.A,QCardActions:L.A,QBtn:v.A,QUploader:C.A,QTable:A.A,QTd:T.A,QIcon:B.A}),N()(g,"directives",{ClosePopup:I.A})}}]);