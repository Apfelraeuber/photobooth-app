"use strict";(globalThis["webpackChunkqPhotobooth"]=globalThis["webpackChunkqPhotobooth"]||[]).push([[280],{6079:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var a=l(9835),i=l(6970);const o={class:"row justify-center q-gutter-sm"},s={class:"absolute-bottom text-subtitle2"};function n(e,t,l,n,r,d){const c=(0,a.up)("q-img"),g=(0,a.up)("q-card"),u=(0,a.up)("q-intersection"),m=(0,a.up)("gallery-image-detail"),p=(0,a.up)("q-dialog"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.store.gallery.images,((e,t)=>((0,a.wg)(),(0,a.j4)(u,{key:e.id,once:"",class:"preview-item"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"q-ma-sm",onClick:e=>d.openPic(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{src:d.getImageDetail(t),loading:"eager","no-transition":"","no-spinner":"",ratio:1},{default:(0,a.w5)((()=>[(0,a._)("div",s,(0,i.zw)(this.store.gallery.images[t].caption),1)])),_:2},1032,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))]),(0,a.Wm)(p,{"transition-show":"jump-up","transition-hide":"jump-down",modelValue:n.showImageDetail,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showImageDetail=e),maximized:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{indexSelected:n.indexSelected},null,8,["indexSelected"])])),_:1},8,["modelValue"])])),_:1})}var r=l(7575),d=l(499);const c=e=>((0,a.dD)("data-v-104b3e21"),e=e(),(0,a.Cn)(),e),g={class:"q-pa-none galleryimagedetail"},u={class:"absolute-bottom-left text-subtitle2"},m={class:"q-gutter-sm"},p={class:"q-gutter-sm"},h=c((()=>(0,a._)("div",null,"close",-1)));function w(e,t,l,o,s,n){const r=(0,a.up)("q-carousel-slide"),d=(0,a.up)("q-carousel"),c=(0,a.up)("vue-qrcode"),w=(0,a.up)("q-page-sticky"),y=(0,a.up)("q-icon"),b=(0,a.up)("q-btn"),f=(0,a.up)("q-fab-action"),I=(0,a.up)("q-fab"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(d,{class:"bg-image",style:{width:"100%",height:"100%"},"control-type":"unelevated","control-color":"primary",swipeable:"",animated:"",modelValue:o.currentSlideId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.currentSlideId=e),thumbnails:"",autoplay:o.autoplay,draggable:"false",arrows:"","transition-prev":"slide-right","transition-next":"slide-left",onTransition:t[1]||(t[1]=(e,t)=>{o.currentSlideIndex=o.store.gallery.images.findIndex((t=>t.id===e))})},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.slicedImages,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{"img-src":e.preview,key:e.id,name:e.id},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",null,(0,i.zw)(e.caption),1),(0,a._)("div",null,"index: "+(0,i.zw)(t)+", id: "+(0,i.zw)(e.id),1)])])),_:2},1032,["img-src","name"])))),128))])),_:1},8,["modelValue","autoplay"]),(0,a.Wm)(w,{position:"top-right",offset:[30,30]},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(c,{type:"image/png",tag:"svg",margin:2,color:{dark:"#111111",light:"#EEEEEE"},options:{width:200,errorCorrectionLevel:"high"},value:n.getImageQrData()},null,8,["value"])])])),_:1}),(0,a.Wm)(w,{position:"top-left",offset:[20,20]},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{color:"primary","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{left:"",size:"5em",name:"arrow_back_ios_new"}),h])),_:1})),[[_]])])])),_:1}),(0,a.Wm)(w,{position:"bottom-right",offset:[35,35]},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{direction:"up",modelValue:o.fabRight,"onUpdate:modelValue":t[4]||(t[4]=e=>o.fabRight=e),"vertical-actions-align":"right",glossy:"",color:"grey",icon:"keyboard_arrow_up"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{"label-position":"left",icon:"delete",label:"Delete",color:"secondary",onClick:t[2]||(t[2]=e=>n.deleteImage(o.currentSlideId))},null,512),[[_]]),(0,a.Wm)(f,{"label-position":"left",icon:"download",label:"Download",color:"primary",onClick:t[3]||(t[3]=e=>{o.openURL(o.store.gallery.images[o.currentSlideIndex]["image"])})}),(0,a.Wm)(f,{"label-position":"left",icon:"print",label:"Print",color:"primary"})])),_:1},8,["modelValue"])])),_:1})])}l(8964);var y=l(528),b=l(3752);const f={props:{indexSelected:{type:Number,required:!0}},computed:{slicedImages(){this.store.gallery.images.length;var e=Math.max(0,this.currentSlideIndex-2),t=Math.max(0,this.currentSlideIndex+3);return this.store.gallery.images.slice(e,t)}},beforeCreate(){console.log(this.indexSelected),this.currentSlideIndex=this.indexSelected,this.currentSlideId=this.store.gallery.images[this.indexSelected].id},data(){return{}},setup(){const e=(0,r.h)();return{store:e,openURL:b.Z,fabRight:(0,d.iH)(!1),currentSlideId:(0,d.iH)(""),currentSlideIndex:(0,d.iH)(0),autoplay:(0,d.iH)(!1)}},components:{VueQrcode:y.ZP},methods:{deleteImage(e){this.$api.get("gallery/delete",{params:{image_id:e}}).then((e=>{console.log(e),this.store.gallery.images.splice(this.currentSlideIndex,1)})).catch((e=>console.log(e)))},getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},getImageQrData(){const e=String(this.store.serverConfig.common["EXT_DOWNLOAD_URL"]).replace("{filename}",this.store.gallery.images[this.currentSlideIndex]["filename"]);return console.log(e),e}}};var I=l(1639),_=l(7052),v=l(1694),x=l(627),S=l(8879),q=l(2857),D=l(9361),k=l(935),Z=l(2146),Q=l(9984),W=l.n(Q);const C=(0,I.Z)(f,[["render",w],["__scopeId","data-v-104b3e21"]]),V=C;W()(f,"components",{QCarousel:_.Z,QCarouselSlide:v.Z,QPageSticky:x.Z,QBtn:S.Z,QIcon:q.Z,QFab:D.Z,QFabAction:k.Z}),W()(f,"directives",{ClosePopup:Z.Z});const j={components:{GalleryImageDetail:V},setup(){const e=(0,r.h)();return{store:e,GalleryImageDetail:V,indexSelected:(0,d.iH)(null),showImageDetail:(0,d.iH)(!1)}},computed:{numberOfImages:{get(){return console.log(Object.keys(this.store.gallery["images"]).length),Object.keys(this.store.gallery["images"]).length}}},mounted(){this.$api.get("gallery/images").then((e=>{console.log(e),this.store.gallery.images=e.data})).catch((e=>console.log(e)))},methods:{getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},openPic(e){console.log(e),this.indexSelected=e,this.showImageDetail=!0}}};var P=l(9885),H=l(1517),E=l(4458),z=l(335),R=l(7743);const U=(0,I.Z)(j,[["render",n],["__scopeId","data-v-457fb6ab"]]),L=U;W()(j,"components",{QPage:P.Z,QIntersection:H.Z,QCard:E.Z,QImg:z.Z,QDialog:R.Z})}}]);