"use strict";(globalThis["webpackChunkqPhotobooth"]=globalThis["webpackChunkqPhotobooth"]||[]).push([[977],{6977:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var a=l(9835),o=l(6970);const i={class:"row justify-center q-gutter-sm"},n={class:"absolute-bottom text-subtitle2"};function s(e,t,l,s,r,c){const g=(0,a.up)("q-img"),d=(0,a.up)("q-card"),m=(0,a.up)("q-intersection"),u=(0,a.up)("gallery-image-detail"),p=(0,a.up)("q-dialog"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.store.gallery.images,((e,t)=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,once:"",class:"preview-item"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"q-ma-sm",onClick:e=>c.openPic(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{src:c.getImageDetail(t),loading:"eager","no-transition":"","no-spinner":"",ratio:1},{default:(0,a.w5)((()=>[(0,a._)("div",n,(0,o.zw)(this.store.gallery.images[t].caption),1)])),_:2},1032,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))]),(0,a.Wm)(p,{"transition-show":"jump-up","transition-hide":"jump-down",modelValue:s.showImageDetail,"onUpdate:modelValue":t[0]||(t[0]=e=>s.showImageDetail=e),"full-height":"","full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{indexSelected:s.indexSelected},null,8,["indexSelected"])])),_:1},8,["modelValue"])])),_:1})}var r=l(7575),c=l(499);const g={class:"q-pa-none"},d={class:"absolute-bottom-left text-subtitle2"},m={class:"q-gutter-sm"},u=(0,a._)("div",null,"Scan to Download!",-1),p={class:"q-gutter-sm"},h=(0,a._)("div",null,"Start",-1),w={class:"q-gutter-sm"},f=(0,a._)("div",null,"back to gallery",-1);function b(e,t,l,i,n,s){const r=(0,a.up)("q-img"),c=(0,a.up)("q-card-section"),b=(0,a.up)("q-card"),y=(0,a.up)("vue-qrcode"),_=(0,a.up)("q-page-sticky"),v=(0,a.up)("q-icon"),q=(0,a.up)("q-btn"),x=(0,a.up)("q-fab-action"),I=(0,a.up)("q-fab"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(b,{class:"column bg-image",style:{width:"100%",height:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"col no-padding",align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"spinner-color":"white",loading:"lazy",src:i.store.gallery.images[l.indexSelected]["preview"],style:{"max-width":"100%","max-height":"100%"},fit:"contain"},{default:(0,a.w5)((()=>[(0,a._)("div",d,(0,o.zw)(i.store.gallery.images[l.indexSelected].caption),1)])),_:1},8,["src"])])),_:1})])),_:1}),(0,a.Wm)(_,{position:"top-right",offset:[30,30]},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(y,{type:"image/png",tag:"svg",margin:2,color:{dark:"#111111",light:"#EEEEEE"},options:{width:200,errorCorrectionLevel:"high"},value:s.getImageQrData(l.indexSelected)},null,8,["value"]),u])])),_:1}),(0,a.Wm)(_,{position:"top-left",offset:[20,20]},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a.Wm)(q,{color:"primary","no-caps":"",to:"/"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{left:"",size:"5em",name:"arrow_back_ios_new"}),h])),_:1})])])),_:1}),(0,a.Wm)(_,{position:"bottom",offset:[0,25]},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(q,{color:"primary","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{left:"",size:"5em",name:"close"}),f])),_:1})),[[W]]),(0,a.Wm)(q,{label:"next",onOnclick:t[0]||(t[0]=t=>e.currentId="NEXT"),target:"_blank"})])])),_:1}),(0,a.Wm)(_,{position:"bottom-right",offset:[35,35]},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{direction:"up",modelValue:i.fabRight,"onUpdate:modelValue":t[2]||(t[2]=e=>i.fabRight=e),"vertical-actions-align":"right",glossy:"",icon:"keyboard_arrow_up"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(x,{"label-position":"left",icon:"delete",label:"Delete",color:"negative",onClick:t[1]||(t[1]=e=>s.deleteImage(i.store.gallery.images[l.indexSelected]["id"]))},null,512),[[W]]),(0,a.Wm)(q,{"label-position":"left",icon:"download",label:"Download",href:i.store.gallery.images[l.indexSelected]["image"],target:"_blank"},null,8,["href"])])),_:1},8,["modelValue"])])),_:1})])}l(8964);var y=l(528),_=l(6899);new _.Z(".swiper",{direction:"vertical",loop:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}});const v={props:{indexSelected:{type:Number,required:!0}},beforeCreate(){console.log(this.indexSelected)},data(){return{}},setup(){const e=(0,r.h)();return{store:e,fabRight:(0,c.iH)(!1)}},components:{VueQrcode:y.ZP},methods:{deleteImage(e){this.$api.get("gallery/delete",{params:{id:e}}).then((e=>{console.log(e),this.store.gallery.images.splice(this.indexSelected,1)})).catch((e=>console.log(e)))},getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},getImageQrData(e){return String(this.store.serverConfig["EXT_DOWNLOAD_URL"]).replace("{filename}",this.store.gallery.images[e]["filename"])}}};var q=l(1639),x=l(4458),I=l(3190),W=l(335),k=l(627),D=l(8879),S=l(2857),Z=l(9361),Q=l(935),C=l(2146),E=l(9984),j=l.n(E);const P=(0,q.Z)(v,[["render",b]]),V=P;j()(v,"components",{QCard:x.Z,QCardSection:I.Z,QImg:W.Z,QPageSticky:k.Z,QBtn:D.Z,QIcon:S.Z,QFab:Z.Z,QFabAction:Q.Z}),j()(v,"directives",{ClosePopup:C.Z});const O={components:{GalleryImageDetail:V},setup(){const e=(0,r.h)();return{store:e,GalleryImageDetail:V,indexSelected:(0,c.iH)(null),showImageDetail:(0,c.iH)(!1)}},computed:{numberOfImages:{get(){return console.log(Object.keys(this.store.gallery["images"]).length),Object.keys(this.store.gallery["images"]).length}}},mounted(){this.$api.get("gallery/images").then((e=>{console.log(e),this.store.gallery.images=e.data})).catch((e=>console.log(e)))},methods:{getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},openPic(e){console.log(e),this.indexSelected=e,this.showImageDetail=!0}}};var z=l(9885),H=l(1517),R=l(7743);const T=(0,q.Z)(O,[["render",s],["__scopeId","data-v-3f0540ec"]]),L=T;j()(O,"components",{QPage:z.Z,QIntersection:H.Z,QCard:x.Z,QImg:W.Z,QDialog:R.Z})}}]);