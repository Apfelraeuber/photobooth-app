"use strict";(globalThis["webpackChunkqPhotobooth"]=globalThis["webpackChunkqPhotobooth"]||[]).push([[668],{8668:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var a=l(9835),i=l(6970);const o={class:"row justify-center q-gutter-sm"},s={class:"absolute-bottom text-subtitle2"};function r(e,t,l,r,n,d){const c=(0,a.up)("q-img"),g=(0,a.up)("q-card"),u=(0,a.up)("q-intersection"),m=(0,a.up)("gallery-image-detail"),p=(0,a.up)("q-dialog"),h=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(h,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.store.gallery.images,((e,t)=>((0,a.wg)(),(0,a.j4)(u,{key:e.id,once:"",class:"preview-item"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"q-ma-sm",onClick:e=>d.openPic(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{src:d.getImageDetail(t),loading:"eager","no-transition":"","no-spinner":"",ratio:1},{default:(0,a.w5)((()=>[(0,a._)("div",s,(0,i.zw)(this.store.gallery.images[t].caption),1)])),_:2},1032,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))]),(0,a.Wm)(p,{"transition-show":"jump-up","transition-hide":"jump-down",modelValue:r.showImageDetail,"onUpdate:modelValue":t[0]||(t[0]=e=>r.showImageDetail=e),maximized:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{indexSelected:r.indexSelected},null,8,["indexSelected"])])),_:1},8,["modelValue"])])),_:1})}var n=l(7575),d=l(499);const c=e=>((0,a.dD)("data-v-10829ca4"),e=e(),(0,a.Cn)(),e),g={class:"q-pa-none galleryimagedetail"},u={class:"absolute-bottom-left text-subtitle2"},m={class:"q-gutter-sm"},p={class:"q-gutter-sm"},h=c((()=>(0,a._)("div",null,"close",-1)));function w(e,t,l,o,s,r){const n=(0,a.up)("q-carousel-slide"),d=(0,a.up)("q-carousel"),c=(0,a.up)("vue-qrcode"),w=(0,a.up)("q-page-sticky"),y=(0,a.up)("q-icon"),b=(0,a.up)("q-btn"),f=(0,a.up)("q-fab-action"),I=(0,a.up)("q-fab"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(d,{class:"bg-image",style:{width:"100%",height:"100%"},"control-type":"unelevated","control-color":"primary",swipeable:"",animated:"",modelValue:o.currentSlideId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.currentSlideId=e),thumbnails:"",autoplay:o.autoplay,draggable:"false",arrows:"","transition-prev":"slide-right","transition-next":"slide-left",onTransition:t[1]||(t[1]=(e,t)=>{o.currentSlideIndex=o.store.gallery.images.findIndex((t=>t.id===e))})},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.slicedImages,((e,t)=>((0,a.wg)(),(0,a.j4)(n,{"img-src":e.preview,key:e.id,name:e.id},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",null,(0,i.zw)(e.caption),1),(0,a._)("div",null,"index: "+(0,i.zw)(t)+", id: "+(0,i.zw)(e.id),1)])])),_:2},1032,["img-src","name"])))),128))])),_:1},8,["modelValue","autoplay"]),(0,a.Wm)(w,{position:"top-right",offset:[30,30]},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(c,{type:"image/png",tag:"svg",margin:2,color:{dark:"#111111",light:"#EEEEEE"},options:{width:200,errorCorrectionLevel:"high"},value:r.getImageQrData()},null,8,["value"])])])),_:1}),(0,a.Wm)(w,{position:"top-left",offset:[20,20]},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{color:"primary","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{left:"",size:"5em",name:"arrow_back_ios_new"}),h])),_:1})),[[_]])])])),_:1}),(0,a.Wm)(w,{position:"bottom-right",offset:[35,35]},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{direction:"up",modelValue:o.fabRight,"onUpdate:modelValue":t[4]||(t[4]=e=>o.fabRight=e),"vertical-actions-align":"right",glossy:"",color:"grey",icon:"keyboard_arrow_up"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(f,{"label-position":"left",icon:"delete",label:"Delete",color:"secondary",onClick:t[2]||(t[2]=e=>r.deleteImage(o.currentSlideId))},null,512),[[_]]),(0,a.Wm)(f,{"label-position":"left",icon:"download",label:"Download",color:"primary",onClick:t[3]||(t[3]=e=>{o.openURL(o.store.gallery.images[o.currentSlideIndex]["image"])})}),(0,a.Wm)(f,{"label-position":"left",icon:"print",label:"Print",color:"primary"})])),_:1},8,["modelValue"])])),_:1})])}var y=l(528),b=l(6694),f=l(3752);const I={props:{indexSelected:{type:Number,required:!0}},computed:{slicedImages(){this.store.gallery.images.length;var e=Math.max(0,this.currentSlideIndex-2),t=Math.max(0,this.currentSlideIndex+3);return this.store.gallery.images.slice(e,t)}},beforeCreate(){console.log(this.indexSelected),this.currentSlideIndex=this.indexSelected,this.currentSlideId=this.store.gallery.images[this.indexSelected].id},data(){return{}},setup(){const e=(0,n.h)(),t=(0,b.R)();return{store:e,uiSettingsStore:t,openURL:f.Z,fabRight:(0,d.iH)(!1),currentSlideId:(0,d.iH)(""),currentSlideIndex:(0,d.iH)(0),autoplay:(0,d.iH)(!1)}},components:{VueQrcode:y.ZP},methods:{deleteImage(e){this.$api.get("gallery/delete",{params:{image_id:e}}).then((e=>{console.log(e),this.store.gallery.images.splice(this.currentSlideIndex,1)})).catch((e=>console.log(e)))},getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},getImageQrData(){const e=this.store.gallery.images[this.currentSlideIndex]["ext_download_url"];return e}}};var _=l(1639),v=l(7052),x=l(1694),S=l(627),q=l(8879),D=l(2857),k=l(9361),Z=l(935),Q=l(2146),W=l(9984),C=l.n(W);const V=(0,_.Z)(I,[["render",w],["__scopeId","data-v-10829ca4"]]),j=V;C()(I,"components",{QCarousel:v.Z,QCarouselSlide:x.Z,QPageSticky:S.Z,QBtn:q.Z,QIcon:D.Z,QFab:k.Z,QFabAction:Z.Z}),C()(I,"directives",{ClosePopup:Q.Z});const P={components:{GalleryImageDetail:j},setup(){const e=(0,n.h)();return{store:e,GalleryImageDetail:j,indexSelected:(0,d.iH)(null),showImageDetail:(0,d.iH)(!1)}},computed:{numberOfImages:{get(){return console.log(Object.keys(this.store.gallery["images"]).length),Object.keys(this.store.gallery["images"]).length}}},mounted(){this.$api.get("gallery/images").then((e=>{console.log(e),this.store.gallery.images=e.data})).catch((e=>console.log(e)))},methods:{getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},openPic(e){console.log(e),this.indexSelected=e,this.showImageDetail=!0}}};var H=l(9885),z=l(1517),E=l(4458),R=l(335),U=l(7743);const L=(0,_.Z)(P,[["render",r],["__scopeId","data-v-457fb6ab"]]),O=L;C()(P,"components",{QPage:H.Z,QIntersection:z.Z,QCard:E.Z,QImg:R.Z,QDialog:U.Z})}}]);