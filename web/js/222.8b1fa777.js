"use strict";(globalThis["webpackChunkqPhotobooth"]=globalThis["webpackChunkqPhotobooth"]||[]).push([[222],{7222:(e,t,l)=>{l.r(t),l.d(t,{default:()=>O});var i=l(9835),a=l(6970);const o={class:"row justify-center q-gutter-sm"},n={class:"absolute-bottom text-subtitle2"};function s(e,t,l,s,r,d){const c=(0,i.up)("q-img"),g=(0,i.up)("q-card"),u=(0,i.up)("q-intersection"),m=(0,i.up)("gallery-image-detail"),p=(0,i.up)("q-dialog"),h=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(h,{padding:""},{default:(0,i.w5)((()=>[(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.store.gallery.images,((e,t)=>((0,i.wg)(),(0,i.j4)(u,{key:e.id,once:"",class:"preview-item"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{class:"q-ma-sm",onClick:e=>d.openPic(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{src:d.getImageDetail(t),loading:"eager","no-transition":"","no-spinner":"",ratio:1},{default:(0,i.w5)((()=>[(0,i._)("div",n,(0,a.zw)(this.store.gallery.images[t].caption),1)])),_:2},1032,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))]),(0,i.Wm)(p,{"transition-show":"jump-up","transition-hide":"jump-down",modelValue:s.showImageDetail,"onUpdate:modelValue":t[0]||(t[0]=e=>s.showImageDetail=e),maximized:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{indexSelected:s.indexSelected},null,8,["indexSelected"])])),_:1},8,["modelValue"])])),_:1})}var r=l(7575),d=l(499);const c=e=>((0,i.dD)("data-v-7e344d94"),e=e(),(0,i.Cn)(),e),g={class:"q-pa-none galleryimagedetail"},u={class:"absolute-bottom-left text-subtitle2"},m={class:"q-gutter-sm"},p={class:"q-gutter-sm"},h=c((()=>(0,i._)("div",null,"close",-1)));function w(e,t,l,o,n,s){const r=(0,i.up)("q-carousel-slide"),d=(0,i.up)("q-carousel"),c=(0,i.up)("vue-qrcode"),w=(0,i.up)("q-page-sticky"),y=(0,i.up)("q-icon"),f=(0,i.up)("q-btn"),b=(0,i.up)("q-fab-action"),I=(0,i.up)("q-fab"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(d,{class:"bg-image",style:{width:"100%",height:"100%"},"control-type":"unelevated","control-color":"primary",swipeable:"",animated:"",modelValue:o.currentSlideId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.currentSlideId=e),thumbnails:"",autoplay:o.autoplay,draggable:"false",arrows:"","transition-prev":"slide-right","transition-next":"slide-left",onTransition:t[1]||(t[1]=(e,t)=>{o.currentSlideIndex=o.store.gallery.images.findIndex((t=>t.id===e))})},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.slicedImages,((e,t)=>((0,i.wg)(),(0,i.j4)(r,{"img-src":e.preview,key:e.id,name:e.id},{default:(0,i.w5)((()=>[(0,i._)("div",u,[(0,i._)("div",null,(0,a.zw)(e.caption),1),(0,i._)("div",null,"index: "+(0,a.zw)(t)+", id: "+(0,a.zw)(e.id),1)])])),_:2},1032,["img-src","name"])))),128))])),_:1},8,["modelValue","autoplay"]),(0,i.Wm)(w,{position:"top-right",offset:[30,30]},{default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i.Wm)(c,{type:"image/png",tag:"svg",margin:2,color:{dark:"#111111",light:"#EEEEEE"},options:{width:200,errorCorrectionLevel:"high"},value:s.getImageQrData()},null,8,["value"])])])),_:1}),(0,i.Wm)(w,{position:"top-left",offset:[20,20]},{default:(0,i.w5)((()=>[(0,i._)("div",p,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(f,{color:"primary","no-caps":""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{left:"",size:"5em",name:"arrow_back_ios_new"}),h])),_:1})),[[_]])])])),_:1}),(0,i.Wm)(w,{position:"bottom-right",offset:[35,35]},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{direction:"up",modelValue:o.fabRight,"onUpdate:modelValue":t[4]||(t[4]=e=>o.fabRight=e),"vertical-actions-align":"right",glossy:"",color:"grey",icon:"keyboard_arrow_up"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(b,{"label-position":"left",icon:"delete",label:"Delete",color:"secondary",onClick:t[2]||(t[2]=e=>s.deleteImage(o.currentSlideId))},null,512),[[_]]),(0,i.Wm)(b,{"label-position":"left",icon:"download",label:"Download",color:"primary",onClick:t[3]||(t[3]=e=>{o.openURL(o.store.gallery.images[o.currentSlideIndex]["full"])})}),(0,i.Wm)(b,{"label-position":"left",icon:"print",label:"Print",color:"primary"})])),_:1},8,["modelValue"])])),_:1})])}l(8964);var y=l(528),f=l(6694),b=l(3752);const I={props:{indexSelected:{type:Number,required:!0}},computed:{slicedImages(){this.store.gallery.images.length;var e=Math.max(0,this.currentSlideIndex-2),t=Math.max(0,this.currentSlideIndex+3);return this.store.gallery.images.slice(e,t)}},beforeCreate(){console.log(this.indexSelected),this.currentSlideIndex=this.indexSelected,this.currentSlideId=this.store.gallery.images[this.indexSelected].id},data(){return{}},setup(){const e=(0,r.h)(),t=(0,f.R)();return{store:e,uiSettingsStore:t,openURL:b.Z,fabRight:(0,d.iH)(!1),currentSlideId:(0,d.iH)(""),currentSlideIndex:(0,d.iH)(0),autoplay:(0,d.iH)(!1)}},components:{VueQrcode:y.ZP},methods:{deleteImage(e){this.$api.get("/mediacollection/delete",{params:{image_id:e}}).then((e=>{console.log(e),this.store.gallery.images.splice(this.currentSlideIndex,1)})).catch((e=>console.log(e)))},getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},getImageQrData(){const e=String(this.uiSettingsStore.uiSettings.EXT_DOWNLOAD_URL).replace("{filename}",this.store.gallery.images[this.currentSlideIndex]["filename"]);return e}}};var _=l(1639),S=l(7052),v=l(1694),x=l(627),q=l(8879),D=l(2857),k=l(9361),Z=l(935),Q=l(2146),W=l(9984),C=l.n(W);const V=(0,_.Z)(I,[["render",w],["__scopeId","data-v-7e344d94"]]),j=V;C()(I,"components",{QCarousel:S.Z,QCarouselSlide:v.Z,QPageSticky:x.Z,QBtn:q.Z,QIcon:D.Z,QFab:k.Z,QFabAction:Z.Z}),C()(I,"directives",{ClosePopup:Q.Z});const P={components:{GalleryImageDetail:j},setup(){const e=(0,r.h)();return{store:e,GalleryImageDetail:j,indexSelected:(0,d.iH)(null),showImageDetail:(0,d.iH)(!1)}},computed:{numberOfImages:{get(){return console.log(Object.keys(this.store.gallery["images"]).length),Object.keys(this.store.gallery["images"]).length}}},mounted(){this.$api.get("/mediacollection/getitems").then((e=>{console.log(e),this.store.gallery.images=e.data})).catch((e=>console.log(e)))},methods:{getImageDetail(e,t="thumbnail"){return this.store.gallery.images[e][t]},openPic(e){console.log(e),this.indexSelected=e,this.showImageDetail=!0}}};var H=l(9885),E=l(1517),R=l(4458),z=l(335),U=l(7743);const L=(0,_.Z)(P,[["render",s],["__scopeId","data-v-4842f756"]]),O=L;C()(P,"components",{QPage:H.Z,QIntersection:E.Z,QCard:R.Z,QImg:z.Z,QDialog:U.Z})}}]);